!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&o(e)})).observe(document,{childList:!0,subtree:!0})}function o(e){if(e.ep)return;e.ep=!0;const o=function(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?o.credentials="include":"anonymous"===e.crossOrigin?o.credentials="omit":o.credentials="same-origin",o}(e);fetch(e.href,o)}}();const e=14,o=[{id:"square",shape:[[1,1],[1,1]],color:"red"},{id:"line",shape:[[1,1,1,1]],color:"blue"},{id:"t-shape",shape:[[0,1,0],[1,1,1]],color:"purple"},{id:"z-shape",shape:[[1,1,0],[0,1,1]],color:"green"},{id:"l-shape",shape:[[1,0],[1,0],[1,1]],color:"yellow"},{id:"z-reverse-shape",shape:[[0,1,1],[1,1,0]],color:"orange"}],t=[{scoreThreshold:0,fallSpeed:1},{scoreThreshold:50,fallSpeed:2},{scoreThreshold:150,fallSpeed:6},{scoreThreshold:200,fallSpeed:8},{scoreThreshold:250,fallSpeed:10}];let r=0,i=1,l=t[i-1].fallSpeed;console.log(`currentFallSpeed: ${l}`);const n=document.querySelector("canvas"),s=null==n?void 0:n.getContext("2d");n&&s&&(n.width=20*e,n.height=560,s.scale(20,20));const c=(a=e,Array(28).fill(0).map((()=>Array(a).fill(0))));var a;const d={id:"square",position:{x:5,y:5},shape:[[1,1],[1,1]]};let h=0,p=0;function f(){return!!d.shape.find(((e,o)=>e.find(((e,t)=>{var r;return 0!==e&&0!==(null==(r=c[o+d.position.y])?void 0:r[t+d.position.x])}))))}function u(){d.shape.forEach(((e,o)=>{e.forEach(((e,t)=>{1===e&&(c[o+d.position.y][t+d.position.x]=1)}))})),d.position.x=Math.floor(e/2-2),d.position.y=0;const n=o[Math.floor(Math.random()*o.length)];d.id=n.id,d.shape=n.shape,f()&&(alert("Â¡Game over! I sorry."),c.forEach((e=>e.fill(0))),r=0,i=1,l=t[i-1].fallSpeed)}function y(){const o=[];c.forEach(((e,t)=>{e.every((e=>1===e))&&o.push(t)})),o.length>0&&(r+=10*o.length,g()),o.forEach((o=>{c.splice(o,1);const t=Array(e).fill(0);c.unshift(t)}))}function g(){const e=document.getElementById("score-display");e&&(e.textContent=r.toString()),i<t.length&&r>=t[i].scoreThreshold&&(i++,l=t[i-1].fallSpeed)}document.addEventListener("keydown",(e=>{if("ArrowLeft"===e.key&&(d.position.x--,f()&&d.position.x++),"ArrowRight"===e.key&&(d.position.x++,f()&&d.position.x--),"ArrowDown"===e.key&&(d.position.y++,f()&&(d.position.y--,u(),y())),"ArrowUp"===e.key){const e=[];for(let t=0;t<d.shape[0].length;t++){const o=[];for(let e=d.shape.length-1;e>=0;e--)o.push(d.shape[e][t]);e.push(o)}const o=d.shape;d.shape=e,f()&&(d.shape=o)}})),function e(t=0){const r=t-p;p=t,h+=r*l,g(),h>1e3&&(d.position.y++,h=0,f()&&(d.position.y--,u(),y())),s&&(s.fillStyle="#000",s.fillRect(0,0,(null==n?void 0:n.width)||0,(null==n?void 0:n.height)||0),c.forEach(((e,o)=>{e.forEach(((e,t)=>{1===e&&(s.fillStyle="gray",s.fillRect(t,o,1,1))}))})),d.shape.forEach(((e,t)=>{e.forEach(((e,r)=>{if(e){const e=o.find((e=>e.id===d.id)),i=e?e.color:"black";s.fillStyle=i,s.fillRect(r+d.position.x,t+d.position.y,1,1)}}))}))),window.requestAnimationFrame(e)}();
//# sourceMappingURL=index-a73c8982.js.map
